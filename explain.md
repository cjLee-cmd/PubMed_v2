# PubMed API 검색 도구 설명

## 개요
이 코드는 PubMed 데이터베이스에서 논문 정보를 검색하고 표시하는 웹 애플리케이션입니다. NCBI E-utilities API를 사용하여 논문의 메타데이터와 초록을 가져옵니다.

## UI/UX 디자인

### 레이아웃 구조
- **2단 분할 레이아웃**: 화면을 좌우로 분할하여 효율적인 공간 활용
- **왼쪽 패널**: 검색 조건 설정 및 키워드 관리
- **오른쪽 패널**: 검색 결과 표시
- **반응형 디자인**: 모바일/태블릿에서는 세로 분할로 자동 전환

### 사용자 인터페이스
- **직관적인 구성**: 검색 설정과 결과를 명확히 분리
- **실시간 미리보기**: 검색 조건을 실시간으로 확인 가능
- **효율적인 공간 활용**: 큰 화면에서 최적화된 레이아웃

## 주요 기능

### 1. 키워드 그룹 관리
- **동적 키워드 입력**: 사용자가 여러 키워드를 입력할 수 있는 그룹을 생성
- **논리 연산자**: AND/OR 연산자를 사용하여 검색 조건 결합
- **자동 그룹 추가**: 키워드 입력 시 새로운 그룹이 자동으로 생성
- **검색 조건 미리보기**: 입력된 조건들을 실시간으로 포맷팅하여 표시

### 2. 복사/붙여넣기 기능
- **키워드 단위 복사/붙여넣기**: 각 키워드 입력 필드에 📋 복사, 📄 붙여넣기 버튼 제공
- **검색 조건 전체 복사/붙여넣기**: Summary 박스에서 전체 검색 조건 복사/붙여넣기
- **지능형 붙여넣기**: 붙여넣은 검색 조건을 자동으로 파싱하여 키워드 그룹들을 재생성
- **키보드 단축키**: Ctrl+C (복사), Ctrl+V (붙여넣기) 지원
- **컨텍스트 메뉴**: 우클릭으로 복사/붙여넣기 메뉴 표시
- **토스트 알림**: 복사/붙여넣기 성공/실패 시 알림 메시지 표시
- **크로스 브라우저 호환**: 최신 Clipboard API와 fallback 방식 모두 지원

### 3. 검색 쿼리 검증
- **validateSearchQuery()**: 검색 조건의 유효성 검사
  - AND/OR 연산자가 문장 끝에 오는 경우 감지
  - 연속된 논리 연산자 사용 방지
  - 오류 발생 시 사용자에게 경고 메시지 표시

### 4. PubMed API 검색 프로세스

#### 3단계 API 호출:
1. **검색 (esearch)**
   - 키워드로 관련 논문의 PMID(PubMed ID) 목록 획득
   - 최대 10개 결과 제한

2. **요약 정보 (esummary)**
   - PMID를 사용하여 논문의 기본 메타데이터 획득
   - 제목, 저자, 출처, 발행일 등

3. **상세 정보 (efetch)**
   - 논문의 초록(abstract) 텍스트 획득
   - 텍스트 형태로 반환

### 5. 데이터 처리 및 표시
- **결과 통합**: 세 가지 API 응답을 결합하여 완전한 논문 정보 구성
- **JSON 형태 출력**: 구조화된 데이터를 사용자가 읽기 쉬운 형태로 표시
- **오류 처리**: 네트워크 오류나 API 오류 발생 시 적절한 메시지 표시

### 6. 검색 결과 저장 기능
- **다중 형식 지원**: JSON과 Excel 형태로 검색 결과 저장
- **JSON 저장**: 원본 데이터를 JSON 형태로 보존하여 다른 시스템에서 활용 가능
- **Excel 저장**: 스프레드시트 형태로 저장하여 데이터 분석과 공유에 용이
- **자동 파일명**: 저장 시점의 날짜와 시간이 자동으로 파일명에 포함
- **스마트 활성화**: 검색 결과가 있을 때만 저장 버튼 활성화
- **데이터 최적화**: Excel 저장 시 컬럼 너비 자동 조정 및 가독성 향상

#### 저장 파일 구조:
- **JSON**: 원본 API 응답 데이터를 그대로 보존
- **Excel**: 번호, PMID, 제목, 저자, 출처, 발행일, 초록 컬럼으로 구성

### 7. 발행 기간 필터링 기능
- **기간 설정 토글**: 체크박스로 날짜 필터 활성화/비활성화
- **시작일/종료일 설정**: 날짜 입력 필드로 검색 범위 지정
- **유연한 범위 검색**: 시작일만, 종료일만, 또는 둘 다 설정 가능
- **PubMed 날짜 형식**: Publication Date 필드를 사용한 정확한 날짜 검색
- **실시간 미리보기**: 날짜 조건이 검색 조건 미리보기에 자동 반영
- **지능형 붙여넣기**: 날짜 필터가 포함된 검색 조건도 파싱하여 복원

#### 날짜 필터 동작:
- **전체 범위**: 시작일과 종료일 모두 설정 시 해당 기간의 논문만 검색
- **시작일만**: 지정된 날짜 이후 발행된 논문 검색
- **종료일만**: 지정된 날짜 이전 발행된 논문 검색
- **자동 형식 변환**: YYYY-MM-DD → YYYY/MM/DD (PubMed API 형식)

## 사용된 API

### NCBI E-utilities
- **esearch**: 검색어를 사용한 논문 ID 검색
- **esummary**: 논문 메타데이터 요약 정보
- **efetch**: 논문의 상세 내용 (초록)

### 브라우저 API
- **Clipboard API**: 최신 브라우저에서 클립보드 접근
- **Document.execCommand()**: 레거시 브라우저 지원을 위한 fallback
- **File API**: 파일 다운로드 기능
- **Blob API**: 바이너리 데이터 처리

### 외부 라이브러리
- **SheetJS (XLSX)**: Excel 파일 생성 및 처리

## 보안
- API 키를 사용하여 NCBI 서비스에 인증된 접근
- CONFIG 객체에서 API 키 관리

## 사용자 경험
- 실시간 검색 조건 미리보기
- 검색 진행 상황 표시
- 직관적인 키워드 그룹 관리 인터페이스
- 복사/붙여넣기 편의 기능
- 오류 상황에 대한 명확한 피드백
- 토스트 알림을 통한 사용자 피드백